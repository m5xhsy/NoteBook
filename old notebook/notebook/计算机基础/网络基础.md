# 网络

## 网络基础知识

### IP地址类型

最初设计互联网络时，为了便于寻址以及层次化构造网络，每个IP地址包括两个标识码（ID），即网络ID和主机ID。同一个物理网络上的所有主机都使用同一个网络ID，网络上的一个主机（包括网络上工作站，服务器和路由器等）有一个主机ID与其对应。IP地址根据网络ID的不同分为5种类型，A类地址、B类地址、C类地址、D类地址和E类地址。

IP地址分为A,B,C,D,E五类。

网络号：用于识别主机所在的网络；
主机号：用于识别该网络中的主机。

其中A类分配给政府机关使用，B类地址给大中型企业使用，C类地址给个人使用。这三种是主要的。

IP地址分为五类，A类保留给政府机构，B类分配给中等规模的公司，C类分配给任何需要的人，D类用于组播，E类用于实验，各类可容纳的地址数目不同。

其中A类、B类、和C类这三类地址用于TCP/IP节点，其它两类D类和E类被用于特殊用途。
A、B、C三类IP地址的特征：当将IP地址写成二进制形式时，A类地址的第一位总是O，B类地址的前两位总是10，C类地址的前三位总是110。

####  A类IP地址

一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”， 地址范围从1.0.0.0 到126.0.0.0。可用的A类网络有126个，每个网络能容纳1亿多个主机。

⑴ A类地址第1字节为网络地址，其它3个字节为主机地址。
⑵ A类地址范围：1.0.0.1—126.155.255.254
⑶ A类地址中的私有地址和保留地址：
① 10.X.X.X是私有地址（所谓的私有地址就是在互联网上不使用，而被用在局域网络中的地址）。
② 127.X.X.X是保留地址，用做循环测试用的。

#### B类IP地址

一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。可用的B类网络有16382个，每个网络能容纳6万多个主机 。

⑴ B类地址第1字节和第2字节为网络地址，其它2个字节为主机地址。
⑵ B类地址范围：128.0.0.1—191.255.255.254。
⑶ B类地址的私有地址和保留地址
① 172.16.0.0—172.31.255.255是私有地址
② 169.254.X.X是保留地址。如果你的IP地址是自动获取IP地址，而你在网络上又没有找到可用的DHCP服务器。就会得到其中一个IP。

#### C类IP地址

一个C类IP地址由3字节的网络地址和1字节的主机地址组成，网络地址的最高位必须是“110”。范围从192.0.0.0到223.255.255.255。C类网络可达209万余个，每个网络能容纳254个主机。

⑴ C类地址第1字节、第2字节和第3个字节为网络地址，第4个个字节为主机地址。另外第1个字节的前三位固定为110。
⑵ C类地址范围：192.0.0.1—223.255.255.254。
⑶ C类地址中的私有地址：
192.168.X.X是私有地址。
 

#### D类地址用于多点广播

D类IP地址第一个字节以“lll0”开始，它是一个专门保留的地址。它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算机，它标识共享同一协议的一组计算机。

⑴ D类地址不分网络地址和主机地址，它的第1个字节的前四位固定为1110。
⑵ D类地址范围：224.0.0.1—239.255.255.254

####  E类IP地址

以“llll0”开始，为将来使用保留。

全零（“0．0．0．0”）地址对应于当前主机。全“1”的IP地址（“255．255．255．255”）是当前子网的广播地址。

⑴ E类地址也不分网络地址和主机地址，它的第1个字节的前五位固定为11110。
⑵ E类地址范围：240.0.0.1—255.255.255.254

#### 私有地址

私有ip地址允许用户在内网随意使用，但是该地址空间不允许进入公网，如果私有IP地址用户需要访问公网，则需要使用NAT网络地址转换技术。

A类地址：10.0.0.0～10.255.255.255

B类地址：172.16.0.0～172.31.255.255

C类地址：192.168.0.0～192.168.255.255
A类地址的第一组数字为1～126。注意，数字0和 127不作为A类地址，数字127保留给内部回送函数，而数字0则表示该地址是本地宿主机，不能传送。

B类地址的第一组数字为128～191。

C类地址的第一组数字为192～223。

#####  A类地址

A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。

##### B类地址

B类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。

#####  C类地址

C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。

实际上，还存在着D类地址和E类地址。但这两类地址用途比较特殊，在这里只是简单介绍一下：D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。

#### 

### netmask网络掩码

- 网络掩码为32bits，与IP地址的位数是一样的。
- 网路掩码在二进制的表示上是一堆连续的1、后面接连续的0
- 值为1的bit对应IP地址中的网络位；为0的bit对应IP地址中的主机位，以此来辅助我们识别一个IP地址中的网络与主机位。

192.168.1.1 255.255.255.0等同于192.168.1.1/24

### IP网络通信

- 单播 网卡MAC地址对网卡MAC地址
- 广播 在整个广播域内泛洪
- 2层 目的MAC为全F（数据帧目的MAC地址为F，广播数据帧）
- 3层 目的IP为全1（IP地址为255.255.255.255为广播IP）
- 组播
- 1对多，

### IP地址类型

- 网络地址：指代网络的地址。在网络的IPv4地址范围内，最小地址保留为网络地址。此地址的主机部分的每个主机位均为0.
- 广播地址：用于向网络中的所有主机发送数据的特殊地址。广播地址使用该网络范围内的最大地址。即主机部分都是各比特位全部为1的地址。
- 主机地址:可分配给网络中终端设备的地址。

 网络号:主机部分全0；广播号：主机部分全1；可用主机IP：网络号与广播号之间。

### VLSM（可见层子网掩码）

#### 为什么要划分子网？

-  因为一个B类地址用于一个广播域，地址浪费。广播域太庞大，一旦发生广播，内网不堪负重。
- 将一个网络号划分成多个子网，每个子网分配给一个独立的广播域
- 广播域缩小、网络规划更加合理。
- IP地址得到了合理利用。

#### 如何进行子网划分(主机借位)

1. 判断类别找掩码
2. 变更掩码找子网
3. 得出子网号
4. 得出主机号
5. 得出广播号

```text
2^m = 向主机位借位后产生的子网个数
```

 m为所借的位数

```text
2^n - 2 = 向主机位借位后产生的每个子网中可用主机IP数
```

 n为原主机位剔除被借位后的剩余位数

 -2的原因是，每个子网中的网络号及广播号不可用。